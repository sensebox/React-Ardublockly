/* Embedded mode workspace container adjustments */
.embedded-mode .blocklyMainBackground {
  width: 100% !important;
  height: 100% !important;
}

.embedded-mode .blocklyWorkspace {
  width: 100% !important;
  height: 100% !important;
}

/* Embedded mode search field - only adjust width and vertical alignment */
.embedded-mode input[type="search"] {
  width: calc(100vw - 40px) !important;
  vertical-align: middle !important;
  -webkit-user-select: text !important;
  user-select: text !important;
}

/* Ensure search category container centers the search input vertically */
.embedded-mode .blocklyToolboxCategory:has(input[type="search"]) {
    height: auto !important;
    margin-left: 4px !important;
}

/* Embedded mode base styling for all categories */
.embedded-mode .blocklyToolboxCategory:not(:has(input[type="search"])) {
  height: 30px !important; /* 30px + 20% = 36px */
  border-radius: 5px;
  background: #fff;
  margin: 2px;
  padding: 2px;
  align-content: center;
  outline: none; /* Fokus-Ring weg */
  position: relative;
}

/* Embedded mode Level 1 (Top-level) categories - Primary style */
.embedded-mode .blocklyToolboxCategoryContainer[aria-level="1"] .blocklyToolboxCategory:not(:has(input[type="search"])) {
  border: 1px solid rgba(0, 128, 0, 0.4);
  background: #fff;
  font-weight: 600;
  font-size: 14px;
}

/* Embedded mode Level 2 (Sub-categories) - Secondary style */
.embedded-mode .blocklyToolboxCategoryContainer[aria-level="2"] .blocklyToolboxCategory:not(:has(input[type="search"])) {
  border: 1px solid #4CAF50;
  background: #E8F5E8;
  font-weight: 500;
  font-size: 13px;
  height: 32px !important;
}

/* Embedded mode Level 3 (Sub-sub-categories) - Tertiary style */
.embedded-mode .blocklyToolboxCategoryContainer[aria-level="3"] .blocklyToolboxCategory:not(:has(input[type="search"])) {
  border: 1px solid #FF9800;
  background: #FFF3E0;
  font-weight: 400;
  font-size: 12px;
  height: 28px !important;
}

/* Embedded mode Level 4+ (Deep nested) - Quaternary style */
.embedded-mode .blocklyToolboxCategoryContainer[aria-level="4"] .blocklyToolboxCategory:not(:has(input[type="search"])) {
  border: 1px solid #9C27B0;
  background: #F3E5F5;
  font-weight: 400;
  font-size: 11px;
  height: 26px !important;
}

/* Embedded mode - disable focus styling */
.embedded-mode .blocklyToolboxCategory:focus,
.embedded-mode .blocklyToolboxCategoryContainer:focus,
.embedded-mode .blocklyTreeRow:focus,
.embedded-mode .blocklyTreeLabel:focus {
  outline: none !important;
  box-shadow: none !important;
}

/* Embedded mode - category indentation and positioning */
.embedded-mode .blocklyToolboxCategoryContainer[aria-level="2"] {
  margin-left: 20px;
}

/* In embedded mode horizontal layout, third level categories should appear next to second level, not indented */
.embedded-mode .blocklyToolboxCategoryContainer[aria-level="3"] {
  margin-left: 0px !important;
  position: relative !important;
  top: 0 !important;
  left: 0 !important;
  transform: none !important;
}

.embedded-mode .blocklyToolboxCategoryContainer[aria-level="4"] {
  margin-left: 0px !important;
  position: relative !important;
  top: 0 !important;
  left: 0 !important;
  transform: none !important;
}

/* Normal toolbox layout - default behavior */
.blocklyToolbox {
  width: auto !important;
  min-width: 200px;
  max-width: 300px;
}

/* Let search-category.css handle all search field styling for both normal and embedded modes */

/* Embedded mode specific styles - only apply when .embedded-mode class is present */
.embedded-mode .blocklyToolbox {
  width: 100% !important;
  height: auto !important;
  min-width: 100% !important;
  max-width: none !important;
  min-height: 60px !important;
  max-height: none !important;
  /* Don't override position - let Blockly handle toolboxPosition: 'end' */
}

.embedded-mode .blocklyToolboxContents {
  display: flex !important;
  flex-wrap: wrap !important;
  align-items: flex-start !important;
}

/* Force horizontal layout for all nested categories in embedded mode */
.embedded-mode .blocklyToolboxCategoryContainer {
  display: inline-block !important;
  vertical-align: top !important;
}

/* Ensure proper spacing between categories at all levels in embedded mode */
.embedded-mode .blocklyToolboxCategoryContainer[aria-level="3"],
.embedded-mode .blocklyToolboxCategoryContainer[aria-level="4"] {
  margin-right: 10px !important;
  margin-bottom: 5px !important;
}

/* Ensure nested categories flow horizontally in embedded mode */
.embedded-mode .blocklyToolboxCategoryContainer[aria-level="2"] .blocklyToolboxCategoryContainer[aria-level="3"],
.embedded-mode .blocklyToolboxCategoryContainer[aria-level="3"] .blocklyToolboxCategoryContainer[aria-level="4"] {
  display: inline-block !important;
  margin-left: 0px !important;
  margin-right: 10px !important;
  position: relative !important;
  top: 0 !important;
  left: 0 !important;
}

/* iPad category heights - using CSS custom properties */
.embedded-mode .blocklyToolboxCategoryContainer[aria-level="1"] .blocklyToolboxCategory:not(:has(input[type="search"])) {
  height: var(--ipad-category-height-1) !important;
  font-size: 16px;
  padding: 8px;
  min-width: 140px;
}

.embedded-mode .blocklyToolboxCategoryContainer[aria-level="2"] .blocklyToolboxCategory:not(:has(input[type="search"])) {
  height: var(--ipad-category-height-2) !important;
  font-size: 15px;
  padding: 6px;
  min-width: 120px;
}

.embedded-mode .blocklyToolboxCategoryContainer[aria-level="3"] .blocklyToolboxCategory:not(:has(input[type="search"])) {
  height: var(--ipad-category-height-3) !important;
  font-size: 14px;
  padding: 6px;
  min-width: 100px;
}

.embedded-mode .blocklyToolboxCategoryContainer[aria-level="4"] .blocklyToolboxCategory:not(:has(input[type="search"])) {
  height: var(--ipad-category-height-4) !important;
  font-size: 13px;
  padding: 4px;
  min-width: 90px;
}

/* iPad touch spacing */
.embedded-mode .blocklyToolboxCategory:not(:has(input[type="search"])) {
  margin: var(--ipad-category-margin);
}

/* iPad touch optimizations */
.embedded-mode .blocklyToolboxCategory {
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
}

/* iPad flyout spacing */
.embedded-mode .blocklyFlyout .blocklyBlockCanvas > .blocklyDraggable {
  margin: 8px 0 !important;
}

/* iPad scroll bars */
.embedded-mode .blocklyScrollbarHandle {
  width: 12px !important;
  height: 12px !important;
}

