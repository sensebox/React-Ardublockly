/* Embedded mode optimizations for EmbeddedBlockly */

:root {
  /* Embedded Configuration Values - Moved from embeddedConfig.js */
  --embedded-toolbar-height: 64px;
  --embedded-toolbar-padding: 0 8px;
  --embedded-touch-min-height: 48px;
  --embedded-touch-min-width: 48px;
}

/* Prevent body scroll when in app mode */
body:has(.blockly-app-container) {
  overflow: hidden;
  position: fixed;
  width: 100%;
  height: 100%;
}

.blockly-app-container {
  height: 100vh;
  height: 100dvh; /* Better embedded mode support */
  width: 100vw;
  overflow: hidden;
  position: relative;
  display: flex;
  flex-direction: column;
  touch-action: none; /* Prevent default touch behaviors */
  -webkit-touch-callout: none; /* Disable iOS callout */
  -webkit-user-select: none; /* Disable text selection */
  user-select: none;
}

/* Embedded mode touch optimizations - no phone-specific media queries needed */
.blockly-app-container * {
  -webkit-touch-callout: none;
  -webkit-tap-highlight-color: transparent;
  -webkit-user-select: none;
  user-select: none;
}

/* Ensure Blockly workspace takes full available space */
.blockly-app-container .blocklyDiv {
  height: 100% !important;
  width: 100% !important;
}

/* Ensure BlocklyWindow container takes remaining space after toolbar */
.blockly-app-container > div > div:last-child {
  height: 100%;
  overflow: hidden;
}

/* Embedded mode toolbar - removed workspaceFunc class, using embedded-toolbar instead */

/* Embedded toolbar styling */
.embedded-toolbar {
  height: var(--embedded-toolbar-height);
  padding: var(--embedded-toolbar-padding);
  flex-shrink: 0;
  display: flex;
  justify-content: flex-end;
  align-items: center;
}

/* Embedded workspace styling */
.embedded-workspace {
  flex: 1;
  min-height: 0;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

/* Ensure Blockly workspace takes full height in embedded mode */
.embedded-workspace #blocklyDiv {
  height: 100% !important;
  width: 100% !important;
}

/* =============================================================================
   EMBEDDED BUTTON STYLES
   ============================================================================= */

/* Base embedded button styling */
.embedded-button {
  min-width: var(--embedded-touch-min-width) !important;
  min-height: var(--embedded-touch-min-height) !important;
  height: var(--embedded-touch-min-height) !important;
  padding: 8px 16px !important;
  transition: transform 120ms ease !important;
  margin: 0 8px !important; /* Even spacing between buttons */
  white-space: nowrap !important;
  font-size: 16px !important;
  font-weight: 500 !important;
  text-transform: none !important;
  border-radius: 24px !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  gap: 8px !important;
}

.embedded-button:first-child {
  margin-left: 0 !important;
}

.embedded-button:last-child {
  margin-right: 0 !important;
}

.embedded-button:hover {
  transform: scale(1.05) !important;
}

.embedded-button:active {
  transform: scale(0.95) !important;
}

/* Primary embedded button (Reset, Share) */
.embedded-button-primary {
  background-color: #4EAF47 !important;
  color: #ffffff !important;
}

.embedded-button-primary:hover {
  background-color: #4EAF47 !important;
  color: #ffffff !important;
}

/* Compile embedded button */
.embedded-button-compile {
  background-color: #e27136 !important;
  color: #ffffff !important;
}

.embedded-button-compile:hover {
  background-color: #e27136 !important;
  color: #ffffff !important;
}

/* Workspace name embedded styling */
.embedded-workspace-name {
  height: var(--embedded-touch-min-height) !important; /* Match button height */
  background-color: #DDDDDD !important;
  border-radius: 25px !important;
  display: inline-flex !important;
  align-items: center !important; /* Center text vertically */
  cursor: pointer !important;
  padding: 0 16px !important; /* Remove top/bottom padding to match button height */
  font-size: 16px !important;
  font-weight: 500 !important;
  width: calc(30vw - 8px) !important;
  min-width: 120px !important;
  transition: transform 120ms ease !important;
  overflow: hidden !important; /* Hide overflow text */
  white-space: nowrap !important; /* Prevent text wrapping */
  text-overflow: ellipsis !important; /* Show ellipsis for overflow */
}

/* Text inside workspace name should have proper spacing */
.embedded-workspace-name .MuiTypography-root {
  flex: 1 !important; /* Take available space */
  overflow: hidden !important;
  white-space: nowrap !important;
  text-overflow: ellipsis !important;
  margin: 0 8px 0 0 !important; /* Space between text and icon */
}

/* Icon container in workspace name */
.embedded-workspace-name > div {
  flex-shrink: 0 !important; /* Don't shrink the icon container */
  width: 40px !important;
  display: flex !important;
}

.embedded-workspace-name:hover {
  background-color: #CCCCCC !important;
  transform: scale(1.02) !important;
}

.embedded-workspace-name:active {
  transform: scale(0.98) !important;
}

/* Optimize for notched devices (embedded mode) */
@supports (padding: max(0px)) {
  .blockly-app-container {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
  }
}

/* Embedded mode touch optimizations */
.blocklyDraggable {
  cursor: grab;
}

.blocklyDraggable:active {
  cursor: grabbing;
}

/* Prevent overscroll/bounce in embedded mode */
.blocklyMainBackground {
  touch-action: none;
}
